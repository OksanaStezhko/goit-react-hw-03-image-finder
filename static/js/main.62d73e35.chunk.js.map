{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Container/Container.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/Error/Error.module.css","components/Container/Container.jsx","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Loader/Loader.jsx","components/Modal/Modal.jsx","components/Error/Error.jsx","api/api-pixabay.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Container","children","className","style","container","prototype","PropTypes","node","isRequired","Searchbar","state","query","handleChange","event","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","SearchForm","this","type","SearchForm__button","SearchForm__button__label","SearchForm__input","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","webformatURL","largeImage","onClickImage","onClick","src","alt","ImageGalleryItem__image","ImageGallery","images","map","largeImageURL","id","Button","button","Loader","loader","color","height","width","modalRef","document","querySelector","Modal","handleKeyDown","onClose","code","handleOverlayClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","modal","Error","text","error","keyApi","axios","defaults","baseURL","fetchImg","currentPage","searchQuery","fetchString","get","then","response","data","catch","console","App","totalHits","isLoading","message","handleChangeQuery","showModal","handleClickButton","fetchApi","handleClickImage","imageItem","closeModal","prevState","prevProps","snapshot","scrollTo","top","documentElement","scrollHeight","behavior","length","options","hits","finally","showButton","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.62d73e35.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1Sx_C\",\"ImageGalleryItem__image\":\"ImageGalleryItem_ImageGalleryItem__image__vaTNp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__13Ynd\",\"Modal\":\"Modal_Modal__29SmX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__8q6GO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3lu-K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__30Dsb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__1TuTA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"Error_error__3adrf\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport style from './Container.module.css';\n\nconst Container = ({ children }) => (\n  <div className={style.container}>{children}</div>\n);\n\nContainer.prototype = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Container;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport style from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  handleChange = event => {\n    this.setState({ query: event.currentTarget.value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    const { query } = this.state;\n    if (!query) return;\n\n    this.props.onSubmit(query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className={style.Searchbar}>\n        <form className={style.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={style.SearchForm__button}>\n            <span className={style.SearchForm__button__label}>Search</span>\n          </button>\n\n          <input\n            className={style.SearchForm__input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.query}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport style from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ webformatURL, largeImage, onClickImage }) => (\n  <li\n    className={style.ImageGalleryItem}\n    onClick={() => onClickImage(largeImage)}\n  >\n    <img src={webformatURL} alt=\"\" className={style.ImageGalleryItem__image} />\n  </li>\n);\n\nImageGalleryItem.propTypes = {\n  webformatURL: PropTypes.string.isRequired,\n  largeImage: PropTypes.string.isRequired,\n  onClickImage: PropTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport PropTypes from 'prop-types';\nimport style from './ImageGallery.module.css';\n\nconst ImageGallery = ({ images, onClickImage }) => (\n  <ul className={style.ImageGallery}>\n    {images.map(({ webformatURL, largeImageURL, id }) => (\n      <ImageGalleryItem\n        key={id}\n        webformatURL={webformatURL}\n        onClickImage={onClickImage}\n        largeImage={largeImageURL}\n      />\n    ))}\n  </ul>\n);\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.shape({ id: PropTypes.string }))\n    .isRequired,\n  onClickImage: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport style from './Button.module.css';\n\nconst Button = ({ onClick }) => (\n  <button type=\"button\" className={style.button} onClick={onClick}>\n    Load more\n  </button>\n);\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\nexport default Button;\n","import React from 'react';\nimport LoaderMarckup from 'react-loader-spinner';\nimport style from './Loader.module.css';\n\nconst Loader = () => (\n  <div className={style.loader}>\n    <LoaderMarckup type=\"Puff\" color=\"#303f9f\" height={80} width={80} />\n  </div>\n);\n\nexport default Loader;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport style from './Modal.module.css';\n\nconst modalRef = document.querySelector('#modal');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = event => {\n    const { onClose } = this.props;\n    if (event.code === 'Escape') {\n      onClose();\n    }\n  };\n\n  handleOverlayClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { largeImage } = this.props;\n    return createPortal(\n      <div className={style.Overlay} onClick={this.handleOverlayClick}>\n        <div className={style.modal}>\n          <img src={largeImage} alt=\"\" />\n        </div>\n      </div>,\n      modalRef,\n    );\n  }\n}\n\nModal.propTypes = {\n  largeImage: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default Modal;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport style from './Error.module.css';\n\nconst Error = ({ text }) => <h2 className={style.error}>{text}</h2>;\n\nError.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default Error;\n","import axios from 'axios';\nconst PAGESIZE = 12;\nconst keyApi = '20047833-7ab7ad4719e2250c2f7b848a4';\n\naxios.defaults.baseURL = `https://pixabay.com/api/?key=${keyApi}&per_page=12`;\n\nconst fetchImg = ({ currentPage, searchQuery }) => {\n  const fetchString = `https://pixabay.com/api/?key=${keyApi}&per_page=${PAGESIZE}&q=${searchQuery}&page=${currentPage}`;\n  return axios\n    .get(fetchString)\n    .then(response => response.data)\n    .catch(console.error);\n};\n\nexport default fetchImg;\n","import React, { Component } from 'react';\nimport Container from './components/Container';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/Button';\nimport Loader from './components/Loader';\nimport Modal from './components/Modal';\nimport Error from './components/Error';\n\nimport fetchImg from './api/api-pixabay';\n\nconst PAGESIZE = 12;\n\nclass App extends Component {\n  state = {\n    images: [],\n    totalHits: 0,\n    searchQuery: '',\n    currentPage: 1,\n    error: null,\n    isLoading: false,\n    largeImage: '',\n    message: '',\n  };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchApi();\n    }\n    if (snapshot) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    if (prevState.images.length < this.state.images.length) return true;\n    return false;\n  }\n\n  handleChangeQuery = query => {\n    this.setState({\n      searchQuery: query,\n      images: [],\n      totalHits: 0,\n      currentPage: 1,\n      error: null,\n      isLoading: false,\n      showModal: false,\n    });\n  };\n\n  handleClickButton = () => {\n    this.fetchApi();\n  };\n\n  handleClickImage = imageItem => {\n    this.setState({\n      showModal: true,\n      largeImage: imageItem,\n    });\n  };\n\n  closeModal = () => {\n    this.setState(prevState => ({\n      largeImage: '',\n      showModal: !prevState.showModal,\n    }));\n  };\n\n  fetchApi() {\n    const { currentPage, searchQuery } = this.state;\n    const options = { currentPage, searchQuery };\n    this.setState({ isLoading: true });\n\n    fetchImg(options)\n      .then(({ hits, totalHits }) => {\n        this.setState({ totalHits: totalHits });\n        this.setState(prevState => ({\n          images: [...prevState.images, ...hits],\n          currentPage: prevState.currentPage + 1,\n        }));\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  }\n\n  render() {\n    const {\n      images,\n      isLoading,\n      totalHits,\n      error,\n      showModal,\n      largeImage,\n      searchQuery,\n    } = this.state;\n    const showButton = totalHits > PAGESIZE;\n\n    return (\n      <Container>\n        <Searchbar onSubmit={this.handleChangeQuery} />\n        {(error && (\n          <Error\n            text={'Что-то пошло не так, попробуйте еще раз сделать запрос...'}\n          />\n        )) ||\n          (totalHits === 0 && searchQuery && !isLoading && (\n            <Error\n              text={'По вашему запросу ничего не найдено, повторите попытку.'}\n            />\n          ))}\n\n        <ImageGallery\n          images={images}\n          onClickImage={this.handleClickImage}\n        ></ImageGallery>\n        {isLoading && <Loader />}\n        {showButton && <Button onClick={this.handleClickButton} />}\n        {showModal && (\n          <Modal onClose={this.closeModal} largeImage={largeImage} />\n        )}\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__er3cJ\",\"SearchForm__button\":\"Searchbar_SearchForm__button__1C2uQ\",\"SearchForm__button__label\":\"Searchbar_SearchForm__button__label__2q6mi\",\"SearchForm\":\"Searchbar_SearchForm__b0Miz\",\"SearchForm__input\":\"Searchbar_SearchForm__input__j3RHL\"};"],"sourceRoot":""}